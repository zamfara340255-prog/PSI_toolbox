import sysimport tracebackfrom datetime import datetimeimport tkinter as tkfrom tkinter import messagebox# ---  ќЌ—“јЌ“џ ---APP_NAME = "Engineer Toolbox"APP_VERSION = "v2.0 Modular"C = 3e8  # —корость света# --- Ћќ√»–ќ¬јЌ»≈ ---def _write_crash_log(exc_type, exc, tb):    try:        ts = datetime.now().strftime("%Y-%m-%d %H:%M:%S")        with open("psi_toolbox_crash.log", "a", encoding="utf-8") as f:            f.write("\n" + "=" * 72 + "\n")            f.write(f"[{ts}] CRASH REPORT:\n")            traceback.print_exception(exc_type, exc, tb, file=f)    except Exception:        passdef setup_exception_hook():    def _excepthook(exc_type, exc, tb):        _write_crash_log(exc_type, exc, tb)        try:            messagebox.showerror("ќшибка", f"ѕроизошла ошибка.\n—м. psi_toolbox_crash.log\n\n{exc}")        except:            pass    sys.excepthook = _excepthook# --- —ќ¬ћ≈—“»ћќ—“№ TTKBOOTSTRAP ---try:    import ttkbootstrap as tb    from ttkbootstrap.constants import *    TB_OK = Trueexcept ImportError:    TB_OK = False    import tkinter.ttk as tb    # «аглушки дл¤ стилей    tb.Window = tk.Tk    PRIMARY, SECONDARY, SUCCESS, DANGER, INFO, WARNING = "primary", "secondary", "success", "danger", "info", "warning"        # ѕатчинг классов дл¤ совместимости    class PatchedFrame(tb.Frame):        def __init__(self, master=None, **kwargs):            kwargs.pop("bootstyle", None); kwargs.pop("padding", None)            super().__init__(master, **kwargs)    tb.Frame = PatchedFrame        class PatchedLabel(tb.Label):        def __init__(self, master=None, **kwargs):            kwargs.pop("bootstyle", None)            super().__init__(master, **kwargs)    tb.Label = PatchedLabel        class PatchedButton(tb.Button):        def __init__(self, master=None, **kwargs):            kwargs.pop("bootstyle", None)            super().__init__(master, **kwargs)    tb.Button = PatchedButton        class PatchedEntry(tb.Entry):        def __init__(self, master=None, **kwargs):            kwargs.pop("bootstyle", None)            super().__init__(master, **kwargs)    tb.Entry = PatchedEntry    class PatchedLabelframe(tb.Labelframe):        def __init__(self, master=None, **kwargs):            kwargs.pop("bootstyle", None); kwargs.pop("padding", None)            super().__init__(master, **kwargs)    tb.Labelframe = PatchedLabelframe# --- MATPLOTLIB CHECK ---try:    import matplotlib    matplotlib.use("TkAgg")    from matplotlib.figure import Figure    from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2Tk    MATPLOTLIB_OK = Trueexcept ImportError:    MATPLOTLIB_OK = False    Figure, FigureCanvasTkAgg, NavigationToolbar2Tk = None, None, None# --- REPORTLAB CHECK ---try:    from reportlab.pdfgen import canvas as pdf_canvas    REPORTLAB_OK = Trueexcept ImportError:    REPORTLAB_OK = False